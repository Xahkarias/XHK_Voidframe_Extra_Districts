# MAIN DISTRICT CONTROLLER
###############################################################################

deposit_xhk_extraframe_district_control = {
	icon = d_frameworld_core
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	# +1 knight district per outpost
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_country_flag = decision_toxic_knights
			}
		}
		district_xhk_extraframe_knights_max_add = 1
		multiplier = owner.value:giga_frameworld_outpost_count
	}

    # resort cap adder
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_technology = tech_resort_colonies }
        }
        district_xhk_extraframe_resort_max_add = 1
        multiplier = value:xhk_extraframe_outpost_count_div4_min1
    }

    resources = {
        produces = { # makes 1 bulk matter every 2 years
            trigger = {
                has_planet_flag = xhk_extraframe_bulk_maker
            }
            giga_sr_bulk_matter = 0.1
        }
        produces = { # for sparble
            trigger = {
                has_planet_flag = xhk_extraframe_hydrogen
            }
            sr_hydrogen = 75
        }

        cost = { # makes 1 bulk matter every 2 years
            trigger = {
                has_planet_flag = xhk_extraframe_bulk_maker
            }
            energy = 20
        }
        cost = { # makes
            trigger = {
                has_planet_flag = xhk_extraframe_hydrogen
            }
            energy = 5
        }
    }
}

# MEGA INTEGRATION
###############################################################################

deposit_xhk_extraframe_think_tank = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = {
		all_technology_research_speed = 0.15
	}

	resources = {
		category = giga_megastructures
		upkeep = { energy = 75 }
		produces = {
			society_research = 300
			engineering_research = 300
			physics_research = 300
		}
	}
}

deposit_xhk_extraframe_stratcoord = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = {
		country_naval_cap_add = 150
		country_starbase_capacity_add = 6
		starbase_defense_platform_capacity_add = 12
		ship_speed_mult = 0.15
	}

	resources = {
		category = giga_megastructures
		upkeep = { energy = 75 }
	}
}

deposit_xhk_extraframe_sentarray = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = {
		add_base_country_intel = 40
		ship_windup_mult = -0.20
		intel_decryption_add = 2
	}

	resources = {
		category = giga_megastructures
		upkeep = { energy = 100 }
	}
}

deposit_xhk_extraframe_megaart = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = { 
		planet_amenities_mult = 0.15
		planetary_ascension_cost_mult = -0.15 
	}

	resources = {
		category = giga_megastructures
		produces = { unity = 300 }
		upkeep = { energy = 30 }
	}
}

deposit_xhk_extraframe_megaart_2 = {
	icon = deposit_xhk_extraframe_megaart
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = { 
		planet_amenities_mult = 0.2 
		planetary_ascension_cost_mult = -0.2
	}

	resources = {
		category = giga_megastructures
		produces = { unity = 400 }
		upkeep = { energy = 30 }
	}
}

deposit_xhk_extraframe_interassemb = {
	icon = deposit_xhk_extraframe_interassemb
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = {
		diplo_weight_mult = 0.40
		envoys_add = 2
		empire_size_mult = -0.10
	}
	
	resources = {
		category = giga_megastructures
		upkeep = { energy = 40 }
	}
}

deposit_xhk_extraframe_hyperass = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = {
		country_naval_cap_add = 1500
		country_resource_max_add = 40000
		starbase_shipyard_build_speed_mult = 0.75
	}

	resources = {
		category = planet_districts
		upkeep = {
			energy = 500
		}
	}
}

deposit_xhk_extraframe_storage_kugel_norm = {
	icon = xhk_extraframe_storage_kugel
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	resources = {
		category = giga_megastructures
		produces = {
			energy = 20
		}
	}
}

deposit_xhk_extraframe_storage_kugel_mega = {
	icon = xhk_extraframe_storage_kugel
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	resources = {
		category = giga_megastructures
		produces = {
			energy = 50
		}
	}
}

deposit_xhk_extraframe_storage_kugel_tera = {
	icon = xhk_extraframe_storage_kugel
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	resources = {
		category = giga_megastructures
		produces = {
			energy = 150
		}
	}
}

# PD INTEGRATION
###############################################################################
deposit_xhk_extraframe_eludium = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				has_technology = tech_eludium_research
			}
		}
		job_xhk_extraframe_eludium_miner_add = 300
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				has_technology = tech_eludium_research
			}
		}
		job_xhk_extraframe_eludium_miner_drone_add = 300
	}
}

deposit_xhk_extraframe_crystal = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				has_technology = tech_acean_research
			}
		}
		job_xhk_extraframe_acean_miner_add = 300
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				has_technology = tech_acean_research
			}
		}
		job_xhk_extraframe_acean_miner_drone_add = 300
	}
}

deposit_xhk_extraframe_crystal_activated = {
	icon = deposit_xhk_extraframe_crystal
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	planet_modifier = {
		planet_farmers_food_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				has_technology = tech_acean_research
			}
		}
		job_xhk_extraframe_acean_miner_add = 300
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				has_technology = tech_acean_research
			}
		}
		job_xhk_extraframe_acean_miner_drone_add = 300
	}
}


## these need to be duped or else the PD effect can accidentally clear the planet image
#Demo/Olig
deposit_xhk_extraframe_pd_senate_building = {
    is_for_colonizable = yes
    category = deposit_cat_rare
    icon = d_pd_senate_building

    use_weights_for_terraforming_swap_types = no

    triggered_planet_modifier = {
        potential = {
            is_planet_class = pc_ringworld_habitable
        }
        job_politician_add = 200
        planet_max_districts_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            is_planet_class = pc_habitat
        }
        planet_max_districts_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
            }
        }
        modifier = {
            job_politician_add = 400
        }
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                OR = {
                    is_democratic_authority = yes
                    has_authority = auth_oligarchic
                }

            }
        }
        job_enforcer_add = 400
        job_bureaucrat_add = 400
        pop_government_ethic_attraction = 1
        planet_stability_add = 10
    }

    planet_modifier = {
        planet_max_districts_add = -2
    }

    potential = {
        is_planet_class = pc_giga_frameworld
    }

    drop_weight = {
        weight = 0
    }
}

#Dic/Imp
deposit_xhk_extraframe_pd_palace_building = {
    is_for_colonizable = yes
    category = deposit_cat_rare
    icon = d_pd_palace_building

    use_weights_for_terraforming_swap_types = no

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
            }
        }
        modifier = {
            job_politician_add = 400
        }
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                OR = {
                    is_dictatorial_authority = yes
                    is_imperial_authority = yes
                }

            }
        }
        job_enforcer_add = 400
        job_bureaucrat_add = 400
        pop_government_ethic_attraction = 1
        planet_stability_add = 10
    }

    planet_modifier = {
        planet_max_districts_add = -2
    }

    potential = {
        is_planet_class = pc_giga_frameworld
    }

    drop_weight = {
        weight = 0
    }
}

#Corp
deposit_xhk_extraframe_pd_headquarters_building = {
    is_for_colonizable = yes
    category = deposit_cat_rare
    icon = d_pd_headquarters_building

    use_weights_for_terraforming_swap_types = no

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_worker_coop_empire = no
            }
        }
        modifier = {
            job_politician_add = 400
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_worker_coop_empire = yes
            }
        }
        modifier = {
            job_bureaucrat_add = 400
        }
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                has_authority = auth_corporate
            }
        }
        job_enforcer_add = 400
        job_bureaucrat_add = 400
        pop_government_ethic_attraction = 1
        planet_stability_add = 10
    }

    planet_modifier = {
        planet_max_districts_add = -2
    }

    potential = {
        is_planet_class = pc_giga_frameworld
    }

    drop_weight = {
        weight = 0
    }
}

#Hive
deposit_xhk_extraframe_pd_confluence_spire_building = {
    is_for_colonizable = yes
    category = deposit_cat_rare
    icon = d_pd_confluence_spire_building

    use_weights_for_terraforming_swap_types = no

    triggered_planet_modifier = {
        potential = {
            exists = owner
        }
        job_spawning_drone_add = 100
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                is_gestalt = yes
            }
        }
        job_coordinator_add = 400
        job_logistics_drone_add = 400
        job_patrol_drone_add = 400
        planet_stability_add = 20
    }

    planet_modifier = {
        planet_max_districts_add = -2
    }

    potential = {
        is_planet_class = pc_giga_frameworld
    }

    drop_weight = {
        weight = 0
    }
}

#Machine
deposit_xhk_extraframe_pd_machine_centralized_processing = {
    is_for_colonizable = yes
    category = deposit_cat_rare
    icon = d_pd_machine_centralized_processing

    use_weights_for_terraforming_swap_types = no

    triggered_planet_modifier = {
        potential = {
            owner = {
                is_machine_empire = yes
                NOT = { has_valid_civic = civic_machine_servitor }
            }
            is_planet_class = pc_ringworld_habitable
        }
        job_evaluator_add = 200
        planet_max_districts_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
            is_planet_class = pc_ringworld_habitable
        }
        job_pd_capital_bio_politician_add = 200
        planet_max_districts_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            is_planet_class = pc_habitat
        }
        planet_max_districts_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        job_replicator_add = 100
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                is_machine_empire = yes
                NOT = { has_valid_civic = civic_machine_servitor }
            }
        }
        job_evaluator_add = 400
        job_logistics_drone_add = 400
        job_patrol_drone_add = 400
        planet_stability_add = 20
    }

    triggered_planet_modifier = {
        potential = {
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
        }
        job_pd_capital_bio_politician_add = 400
        job_logistics_drone_add = 400
        job_patrol_drone_add = 400
        planet_stability_add = 20
    }

    planet_modifier = {
        planet_max_districts_add = -2
    }

    potential = {
        is_planet_class = pc_giga_frameworld
    }

    drop_weight = {
        weight = 0
    }
}

# OTHER
###############################################################################
deposit_xhk_extraframe_lavaframe = {
    icon = "d_blue_lava"
    is_for_colonizable = yes
    category = deposit_cat_energy

    drop_weight = { weight = 0 }
    potential = { always = no }

    planet_modifier = {
        district_giga_frameworld_mining_max_add = 2
    }

    # lavaframe
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_decompressor
        }
        district_xhk_extraframe_polytechnic_max_add = 1
    }
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_advanced_industrial
        }
        district_xhk_extraframe_polytechnic_max_add = 1
    }
    triggered_planet_modifier = {
        potential = {
            has_deposit = d_frameworld_computing_complex
        }
        district_xhk_extraframe_polytechnic_max_add = 1
    }
}

deposit_xhk_extraframe_vivarium = {
	icon = deposit_xhk_extraframe_vivarium
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	country_modifier = { country_vivarium_max_capacity_add = 100 }
	planet_modifier = {
		planet_max_districts_add = -1
	}
	
	resources = {
		category = giga_megastructures
		upkeep = { energy = 8 }
	}
}

deposit_xhk_extraframe_embassy = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	drop_weight = { weight = 0 }
	potential = { always = no }

	resources = {
		category = planet_deposits
		produces = {
			influence = 0.5
		}
	}
	planet_modifier = {
		planet_max_districts_add = -1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		job_politician_add = 200
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		job_coordinator_add = 300
	}
}

deposit_xhk_extraframe_iodizium_schlorp = {
    icon = "d_planet_fragments"
    is_for_colonizable = yes
    category = deposit_cat_energy

    drop_weight = { weight = 0 }
    potential = { always = no }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                has_technology = giga_tech_fusion_suppressor
            }
        }
        modifier = {
            job_giga_iodizium_miner_add = 100
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
                has_technology = giga_tech_fusion_suppressor
            }
        }
        modifier = {
            job_giga_iodizium_mining_drone_add = 100
        }
    }
}
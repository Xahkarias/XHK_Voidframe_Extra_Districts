xhk_voidframe_add_embassy_deposit = {
	owned_planets_only = yes
	icon = decision_xhk_voidframe_embassy

	prerequisites = {
		tech_xeno_relations
	}

	show_tech_unlock_if = {
		owner = { giga_has_frameworld_origin = yes }
	}

	enactment_time = 30
	
	resources = {
		category = megastructures
		cost = {
			minerals = 2000
			energy = 2000
		}
	}
	
	potential = {
		exists = owner
		owner = {
			giga_has_frameworld_origin = yes
		}
		is_planet_class = pc_giga_frameworld
		NOT = { has_deposit = xhk_voidframe_embassy }
	}
	
	allow = {		
		OR = {
			has_building = building_grand_embassy
			has_building = building_dm_embassy
			has_building = building_ae_embassy
			has_building = building_phanon_embassy
			has_building = building_stellarite_embassy
		}
	}
	
	effect = {
		custom_tooltip = xhk_voidframe_add_embassy_deposit_desc

		hidden_effect = {
			add_deposit = xhk_voidframe_embassy
		}
	}
	
	ai_weight = {
		weight = 10
	}
}

xhk_voidframe_add_hyperstructural = {
	owned_planets_only = yes
	icon = decision_xhk_voidframe_add_hyperstructural

	prerequisites = {
		giga_tech_hyperstructural_ass
	}

	show_tech_unlock_if = {
		owner = { giga_has_frameworld_origin = yes }
	}

	enactment_time = 2000
	
	resources = {
		category = megastructures
		cost = {
			alloys = 10000
		}
	}
	
	potential = {
		exists = owner
		owner = {
			giga_has_frameworld_origin = yes
		}
		is_planet_class = pc_giga_frameworld
		NOT = { has_planet_flag = xhk_voidframe_hyperstructural }
		NOT = { has_global_flag = hyperstructural_ass_disabled }
		OR = {
			check_variable = { which = giga_hyperstructural_ass_cap value = 0 }						# No Cap
			check_variable = { which = giga_current_hyperstructural_ass value < giga_hyperstructural_ass_cap }
		}
	}
	
	allow = {		
		has_major_upgraded_capital = yes
		custom_tooltip = {
			fail_text = "requires_not_capped"
			from = {
				OR = {
					check_variable = { which = giga_hyperstructural_ass_cap value = 0 }						# No Cap
					check_variable = { which = giga_current_hyperstructural_ass value < giga_hyperstructural_ass_cap }
				}
			}
		}
	}
	
	effect = {
		custom_tooltip = xhk_voidframe_add_hyperstructural_effect

		hidden_effect = {
			set_planet_flag = xhk_voidframe_hyperstructural

			from = {
				change_variable = { which = giga_current_hyperstructural_ass value = 1 }
				solar_system = {
					spawn_megastructure = {
						type = hyperstructural_ass_2
						planet = ROOT
						owner = space_owner
					}

				}
			}
		}
	}
	
	ai_weight = {
		weight = 10
	}
}

xhk_voidframe_add_sentry= {
	owned_planets_only = yes
	icon = decision_xhk_voidframe_add_hyperstructural

	prerequisites = {
		tech_sentry_array
	}

	show_tech_unlock_if = {
		owner = { giga_has_frameworld_origin = yes }
	}

	enactment_time = 1000
	
	resources = {
		category = megastructures
		cost = {
			alloys = 2000
		}
	}
	
	potential = {
		exists = owner
		owner = {
			giga_has_frameworld_origin = yes
		}
		is_planet_class = pc_giga_frameworld
		NOT = { has_planet_flag = xhk_voidframe_sentry }
		NOT = { has_global_flag = vanilla_array_disabled }
		OR = {
			check_variable = { which = giga_vanilla_array_cap value = 0 }						# No Cap
			check_variable = { which = giga_current_vanilla_array value < giga_vanilla_array_cap }
		}
	}
	
	allow = {		
		has_major_upgraded_capital = yes
		custom_tooltip = {
			fail_text = "requires_not_capped"
			from = {
				OR = {
					check_variable = { which = giga_vanilla_array_cap value = 0 }						# No Cap
					check_variable = { which = giga_current_vanilla_array value < giga_vanilla_array_cap }
				}
			}
		}
	}
	
	effect = {
		custom_tooltip = xhk_voidframe_sentry_effect

		hidden_effect = {
			set_planet_flag = xhk_voidframe_sentry
			
			set_star_flag = spy_orb_built
			from = {
				set_timed_country_flag = { flag = has_recently_built_spy_orb years = 20 }
				set_country_flag = built_spyorb
				change_variable = { which = giga_current_vanilla_array value = 1 }
			}

			from = {
				solar_system = {
					spawn_megastructure = {
						type = spy_orb_0
						planet = ROOT
						owner = space_owner
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 10
	}
}

xhk_voidframe_add_interstellar_assem = {
	owned_planets_only = yes
	icon = decision_xhk_voidframe_add_hyperstructural

	prerequisites = {
		tech_interstellar_assembly
	}

	show_tech_unlock_if = {
		owner = { giga_has_frameworld_origin = yes }
	}

	enactment_time = 1000
	
	resources = {
		category = megastructures
		cost = {
			alloys = 2000
		}
	}
	
	potential = {
		exists = owner
		owner = {
			giga_has_frameworld_origin = yes
		}
		is_planet_class = pc_giga_frameworld
		NOT = { has_planet_flag = xhk_voidframe_interstellar_assem }
		NOT = { has_global_flag = vanilla_interstellar_disabled }
		OR = {
			check_variable = { which = giga_vanilla_interstellar_cap value = 0 }						# No Cap
			check_variable = { which = giga_current_vanilla_interstellar value < giga_vanilla_interstellar_cap }
		}
	}
	
	allow = {		
		has_major_upgraded_capital = yes
		custom_tooltip = {
			fail_text = "requires_not_capped"
			from = {
				OR = {
					check_variable = { which = giga_vanilla_interstellar_cap value = 0 }						# No Cap
					check_variable = { which = giga_current_vanilla_interstellar value < giga_vanilla_interstellar_cap }
				}
			}
		}
	}
	
	effect = {
		custom_tooltip = xhk_voidframe_interstellar_assem_effect

		hidden_effect = {
			set_planet_flag = xhk_voidframe_interstellar_assem

			from = {
				set_timed_country_flag = { flag = has_recently_built_interstellar_assembly years = 20 }
				set_country_flag = built_interstellar_assembly_site
				change_variable = { which = giga_current_vanilla_interstellar value = 1 }
			}
			
			from = {
				solar_system = {
					spawn_megastructure = {
						type = interstellar_assembly_0
						planet = ROOT
						owner = space_owner
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 10
	}
}

xhk_voidframe_add_catapult = {
	owned_planets_only = yes
	icon = decision_xhk_voidframe_add_hyperstructural

	prerequisites = {
		tech_quantum_catapult
	}

	show_tech_unlock_if = {
		owner = { giga_has_frameworld_origin = yes }
	}

	enactment_time = 1000
	
	resources = {
		category = megastructures
		cost = {
			alloys = 2000
		}
	}
	
	potential = {
		exists = owner
		owner = {
			giga_has_frameworld_origin = yes
		}
		is_planet_class = pc_giga_frameworld
		NOT = { has_planet_flag = xhk_voidframe_catapult }
	}
	
	allow = {		
		has_major_upgraded_capital = yes
		custom_tooltip = {
			fail_text = "requires_no_existing_quantum_catapult"
			from = { NOT = { has_country_flag = built_quantum_catapult_site } }
		}
	}
	
	effect = {
		custom_tooltip = xhk_voidframe_catapult_effect

		hidden_effect = {
			set_planet_flag = xhk_voidframe_catapult

			from = {
				set_country_flag = built_quantum_catapult_site
				country_event = { id = tutorial.2126 }
			}

			from = {
				solar_system = {
					spawn_megastructure = {
						type = quantum_catapult_0
						planet = ROOT
						owner = space_owner
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 10
	}
}
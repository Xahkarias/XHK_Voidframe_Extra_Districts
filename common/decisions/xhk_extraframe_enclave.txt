### ENCLAVES
###########################################################################################################

# 100 deg, 50 dist
decision_xhk_extraframe_add_enclave_curator = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_curator }
        exists = event_target:curator_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:curator_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:curator_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_curator_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_curator

            star = {
                event_target:curator_enclave_country = {
                    create_fleet = {
                        name = "NAME_Curator_Alpha_Enclave"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Curator_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 100
                                distance = 50
                            }
                        }
                    }
                }
                this.solar_system = {
                    save_global_event_target_as = curator_enclave_system
                    set_star_flag = enclave
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 80 deg, 50 dist
decision_xhk_extraframe_add_enclave_artisan = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_artisan }
        exists = event_target:artist_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:artist_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:artist_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_artisan_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_artisan

            star = {
                event_target:artist_enclave_country = {
                    create_fleet = {
                        name = "NAME_Ars_Artem"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Artist_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 80
                                distance = 50
                            }
                            set_fleet_flag = artist_enclave_station
                        }
                    }
                }
                this.solar_system = {
                    save_global_event_target_as = artisan_enclave_system
                    set_star_flag = enclave
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 280 deg, 50 dist
decision_xhk_extraframe_add_enclave_xuracorp = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_xuracorp }
        exists = event_target:xuracorp_country
        is_planet_class = pc_giga_frameworld
        event_target:xuracorp_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:xuracorp_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_xuracorp_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_xuracorp

            star = {
                event_target:xuracorp_country = {
                    create_fleet = {
                        name = "NAME_XuraCorp_HQ"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Trader_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 280
                                distance = 50
                            }
                            set_fleet_flag = trader_enclave_station
                        }
                    }
                }
                this.solar_system = {
                    set_star_flag = xuracorp_enclave_system
                    set_star_flag = enclave
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 275 deg, 50 dist
decision_xhk_extraframe_add_enclave_riggian = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_riggian }
        exists = event_target:riggan_country
        is_planet_class = pc_giga_frameworld
        event_target:riggan_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:riggan_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_riggian_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_riggian

            star = {
                event_target:riggan_country = {
                    create_fleet = {
                        name = "NAME_Grand_Bazaar"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Trader_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 275
                                distance = 50
                            }
                            set_fleet_flag = trader_enclave_station
                        }
                    }
                }
                this.solar_system = {
                    set_star_flag = enclave
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 290 deg, 50 dist
decision_xhk_extraframe_add_enclave_muutagan = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_muutagan }
        exists = event_target:muutagan_country
        is_planet_class = pc_giga_frameworld
        event_target:muutagan_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:muutagan_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_muutagan_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_muutagan

            star = {
                event_target:muutagan_country = {
                    create_fleet = {
                        name = "NAME_Muutag_Station"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Trader_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 290
                                distance = 50
                            }
                            set_fleet_flag = trader_enclave_station
                        }
                    }
                }
                this.solar_system = {
                    set_star_flag = enclave
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 285 deg, 50 dist
decision_xhk_extraframe_add_enclave_museum = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_museum }
        exists = event_target:MYH_museum_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:MYH_museum_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:MYH_museum_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_museum_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_museum

            star = {
                event_target:MYH_museum_enclave_country = {
                    create_fleet = {
                        name = "NAME_Archivist_Ship"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Archivist_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 285
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 285 deg, 50 dist
# almost duplicate of above, they should never spawn together
decision_xhk_extraframe_add_enclave_museum_forgotten_hist = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_museum }
        exists = event_target:AAA_museum_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:AAA_museum_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:AAA_museum_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_museum_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_museum

            star = {
                event_target:AAA_museum_enclave_country = {
                    create_fleet = {
                        name = "NAME_Archivista_Enclave_Station"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Archivista_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 285
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 295 deg, 50 dist
decision_xhk_extraframe_add_enclave_garden = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_garden }
        exists = event_target:MYH_garden_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:MYH_garden_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:MYH_garden_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = xhk_extraframe_add_enclave_garden_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_garden

            star = {
                event_target:MYH_garden_enclave_country = {
                    create_fleet = {
                        name = "NAME_Gardener_Ship"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Gardener_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 295
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 300 deg, 50 dist
decision_xhk_extraframe_add_enclave_lawyer = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_lawyer }
        exists = event_target:MYH_lawyer_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:MYH_lawyer_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:MYH_lawyer_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_lawyer_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_lawyer

            star = {
                event_target:MYH_lawyer_enclave_country = {
                    create_fleet = {
                        name = "NAME_Lawyer_Ship"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Lawyer_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 300
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 305 deg, 50 dist
decision_xhk_extraframe_add_enclave_exo = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_exo }
        exists = event_target:MYH_exo_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:MYH_exo_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:MYH_exo_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_exo_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_exo

            star = {
                event_target:MYH_exo_enclave_country = {
                    create_fleet = {
                        name = "NAME_Exo_Ship_1"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Exo_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 305
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 310 deg, 50 dist
decision_xhk_extraframe_add_enclave_hive = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_hive }
        exists = event_target:ne_hive_country
        is_planet_class = pc_giga_frameworld
        event_target:ne_hive_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:ne_hive_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_hive_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_hive

            star = {
                event_target:ne_hive_country = {
                    create_fleet = {
                        name = "NAME_NEHIV_Fleet"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_NEHIV_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 310
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 315 deg, 50 dist
decision_xhk_extraframe_add_enclave_drg = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_drg }
        exists = event_target:ne_drg_country
        is_planet_class = pc_giga_frameworld
        event_target:ne_drg_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:ne_drg_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_drg_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_drg

            star = {
                event_target:ne_drg_country = {
                    create_fleet = {
                        name = "NAME_NEDRG_Fleet_3"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_NEDRG_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 315
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 320 deg, 50 dist
decision_xhk_extraframe_add_enclave_mach = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_mach }
        exists = event_target:ne_machine_country
        is_planet_class = pc_giga_frameworld
        event_target:ne_machine_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:ne_machine_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_mach_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_mach

            star = {
                event_target:ne_machine_country = {
                    create_fleet = {
                        name = "NAME_NEMAC_Fleet"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_NEMAC_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 320
                                distance = 50
                            }
                        }
                    }
                }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}

# 60 deg, 50 dist
decision_xhk_extraframe_add_enclave_shroudwalkers = {
    owned_planets_only = yes
    icon = decision_xhk_extraframe_add_enclave

    enactment_time = 200

    resources = {
        category = megastructures
        cost = {
            alloys = 500
            influence = 100
            unity = 1000
        }
    }

    potential = {
        exists = owner
        owner = {
            giga_has_frameworld_origin = yes
        }
        NOT = { has_planet_flag = xhk_extraframe_enclave_shroudwalker }
        exists = event_target:shroudwalker_enclave_country
        is_planet_class = pc_giga_frameworld
        event_target:shroudwalker_enclave_country = {
            trust = {
                who = from
                value >= 50
            }
        }
    }

    allow = {
        event_target:shroudwalker_enclave_country = {
            trust = {
                who = from
                value >= 90
            }
        }
        planet_size >= 75
    }

    effect = {
        custom_tooltip = decision_xhk_extraframe_add_enclave_shroudwalkers_effect

        hidden_effect = {
            set_planet_flag = xhk_extraframe_enclave_shroudwalker

            star = {
                event_target:shroudwalker_enclave_country = {
                    create_fleet = {
                        name = "NAME_Shroud_Teachers"
                        settings = { spawn_debris = no }
                        effect = {
                            set_owner = prev
                            create_ship = {
                                name = random
                                design = "NAME_Shroudwalker_Enclave_Station"
                                graphical_culture = prev
                            }
                            set_location = {
                                target = prevprev
                                angle = 60
                                distance = 50
                            }
                            # set_fleet_flag = artist_enclave_station
                        }
                    }
                }
                # this.solar_system = {
                #     save_global_event_target_as = artisan_enclave_system
                #     set_star_flag = enclave
                # }
            }
        }
    }

    ai_weight = {
        weight = 0
    }
}
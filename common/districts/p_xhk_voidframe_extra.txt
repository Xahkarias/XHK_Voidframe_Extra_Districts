## District Set: giga_frameworld
## Triggers: is_voidframe_** = yes/no
##
## FRAMEWORLD REPLACEMENT DISTRICTS MUST BE MERGED WITH ORGINIAL
## ONLY NEW DISTRICTS IN THIS FILE
##

@base_cost = 300
@city_cost = 500
@advanced_cost = 1000
@advanced_rare_cost = 50
@advanced_double_cost = 2000
@advanced_double_rare_cost = 100
@mega_cost = 2000
@mega_alloy_cost = 500
@mega_rare_cost = 250

@base_upkeep = 1
@city_upkeep = 2
@advanced_upkeep = 5
@advanced_rare_upkeep = 1
@advanced_double_upkeep = 10
@advanced_double_rare_upkeep = 2
@mega_upkeep = 20
@mega_alloy_upkeep = 5
@mega_rare_upkeep = 5

@base_time = 240
@city_time = 480
@advanced_time = 720
@mega_time = 960

##embassy
###############################################################################################################

district_giga_frameworld_embassy = {
	base_buildtime = @advanced_time
	icon = district_giga_voidframe_embassy
	is_capped_by_modifier = yes
	
	show_on_uncolonized = {
		exists = from
		from = {
			has_technology = "tech_xeno_relations"
		}
		uses_district_set = giga_frameworld
		has_deposit = xhk_voidframe_embassy
		is_voidframe_upgraded = no # shows maximum upgrade level
	}
	
	potential = {
		exists = owner
		owner = {
			has_technology = "tech_xeno_relations"
		}
		has_deposit = xhk_voidframe_embassy
		uses_district_set = giga_frameworld
		OR = { # downgrade ability
			is_voidframe_upgraded = no
			AND = {
				NOR = {
					has_building = building_dm_embassy
					has_building = building_ae_embassy
					has_building = building_phanon_embassy
					has_building = building_stellarite_embassy
				}
				is_voidframe_upgraded = yes
			}
		}
	}
	#tech_dm_embassy
	#tech_ae_embassy
	#tech_phanon_embassy
	#tech_stellarite_embassy

	prerequisites = {
		tech_xeno_relations
	}

	show_tech_unlock_if = {
		giga_has_frameworld_origin = yes
	}

	conversion_ratio = 1
	convert_to = {
		district_giga_frameworld_embassy

		district_giga_voidframe_embassy_dm
		district_giga_voidframe_embassy_de
		district_giga_voidframe_embassy_pe
		district_giga_voidframe_embassy_se
	}
	
	resources = {
		category = planet_districts_hab_research
		cost = {
			minerals = @advanced_cost
			volatile_motes = @advanced_rare_cost
		}
		upkeep = {
			energy = @advanced_upkeep
			volatile_motes = @advanced_rare_upkeep
		}
	}
	
	planet_modifier = {
		planet_housing_add = 1
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_xhk_voidframe_diploman_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_xhk_voidframe_diplodrone_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_xhk_voidframe_diploman_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_xhk_voidframe_diplodrone_effect_desc
	}
	
	triggered_desc = {
		trigger = {
			always = yes
		}
		text = xhk_voidframe_district_embassy_limit
	}
}

inline_script = {
	script = "districts/voidframe/empire/embassy"

	tier = "dm"
	reqtech = "tech_dm_embassy"
	ignore_aot = "yes"

	pass_condition = "
		has_building = building_dm_embassy
	"
	fail_condition = "
		has_building = building_ae_embassy
		has_building = building_phanon_embassy
		has_building = building_stellarite_embassy
	"

	time = "480"

	acot_normjob = "job_xhk_voidframe_diploman_dm_add = 1"
	acot_gestjob = "job_xhk_voidframe_diplodrone_dm_add = 1"

	aot_normjob = ""
	aot_gestjob = ""

	cost = "minerals = 1000 sr_dark_matter = 200"
	upkeep = "energy = 4"
}

inline_script = {
	script = "districts/voidframe/empire/embassy"

	tier = "de"
	reqtech = "tech_ae_embassy"
	ignore_aot = "yes"

	pass_condition = "
		has_building = building_ae_embassy
	"
	fail_condition = "
		has_building = building_phanon_embassy
		has_building = building_stellarite_embassy
	"

	time = "480"

	acot_normjob = "job_xhk_voidframe_diploman_de_add = 1"
	acot_gestjob = "job_xhk_voidframe_diplodrone_de_add = 1"

	aot_normjob = ""
	aot_gestjob = ""

	cost = "minerals = 1000 sr_dark_matter = 400 acot_sr_dark_energy = 400"
	upkeep = "energy = 6 sr_dark_matter = 2"
}

inline_script = {
	script = "districts/voidframe/empire/embassy"

	tier = "pe"
	reqtech = "tech_phanon_embassy"
	ignore_aot = "no"

	pass_condition = "
		has_building = building_phanon_embassy
	"
	fail_condition = "
		has_building = building_stellarite_embassy
	"

	time = "540"

	acot_normjob = ""
	acot_gestjob = ""

	aot_normjob = "job_xhk_voidframe_diploman_pe_add = 1"
	aot_gestjob = "job_xhk_voidframe_diplodrone_pe_add = 1"

	cost = "energy = 2000 minerals = 2000 aot_sr_runic_power = 800"
	upkeep = "energy = 10 aot_sr_runic_power = 10"
}

inline_script = {
	script = "districts/voidframe/empire/embassy"

	tier = "se"
	reqtech = "tech_stellarite_embassy"
	ignore_aot = "no"

	pass_condition = "
		has_building = building_stellarite_embassy
	"
	fail_condition = ""

	time = "630"

	acot_normjob = ""
	acot_gestjob = ""

	aot_normjob = "job_xhk_voidframe_diploman_se_add = 1"
	aot_gestjob = "job_xhk_voidframe_diplodrone_se_add = 1"

	cost = "energy = 4000 minerals = 4000 acot_sr_stellarite = 800"

	upkeep = "energy = 20 acot_sr_stellarite = 10"
}